var link_write=document.querySelector(".write-us"),link_map=document.querySelector(".contacts-map"),letter_popup=document.querySelector(".modal-letter"),map_popup=document.querySelector(".modal-map"),letter_close=document.querySelector(".letter-close"),map_close=document.querySelector(".map-close"),form=document.querySelector(".form-letter"),username=document.querySelector("[name=contact-data]"),e_mail=document.querySelector("[name=contact-email]"),text_subject=document.querySelector("[name=subject]"),isStorageSupport=!0,un_storage="",em_storage="";try{un_storage=localStorage.getItem("username")}catch(e){isStorageSupport=!1}try{em_storage=localStorage.getItem("e_mail")}catch(e){isStorageSupport=!1}link_write.addEventListener("click",function(e){e.preventDefault(),letter_popup.classList.add("modal-show"),un_storage?(username.value=un_storage,e_mail.focus()):username.focus(),em_storage&&(e_mail.value=em_storage,text_subject.focus())}),link_map.addEventListener("click",function(e){e.preventDefault(),map_popup.classList.add("modal-show")}),letter_close.addEventListener("click",function(e){e.preventDefault(),letter_popup.classList.remove("modal-show"),letter_popup.classList.remove("modal-error")}),map_close.addEventListener("click",function(e){e.preventDefault(),map_popup.classList.remove("modal-show")}),form.addEventListener("submit",function(e){username.value&&e_mail.value?isStorageSupport&&(localStorage.setItem("username",username.value),localStorage.setItem("e_mail",e_mail.value)):(e.preventDefault(),letter_popup.classList.remove("modal-error"),letter_popup.offsetWidth=letter_popup.offsetWidth,letter_popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),letter_popup.classList.contains("modal-show")&&(letter_popup.classList.remove("modal-show"),letter_popup.classList.remove("modal-error")),map_popup.classList.contains("modal-show")&&map_popup.classList.remove("modal-show"))});
